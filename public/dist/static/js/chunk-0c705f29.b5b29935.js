(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c705f29"],{"6e57":function(e,t,a){"use strict";var s=a("e413"),r=a.n(s);r.a},"80c1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("common-layout",[a("div",{staticClass:"top"},[a("div",{staticClass:"header"},[a("span",{staticClass:"title"},[e._v(e._s(e.systemName))])])]),a("div",{staticClass:"login"},[a("a-form",{attrs:{form:e.form},on:{submit:e.onSubmit}},[a("a-tabs",{staticStyle:{padding:"0 2px"},attrs:{size:"large",tabBarStyle:{textAlign:"center"}}},[a("a-tab-pane",{key:"1",attrs:{tab:"账户密码登录"}},[e.error?a("a-alert",{staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:e.error,showIcon:""},on:{close:e.onClose}}):e._e(),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["user_account",{rules:[{required:!0,message:"请输入账户名",whitespace:!0}]}],expression:"['user_account', {rules: [{ required: true, message: '请输入账户名', whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"请输入账户名"}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码",whitespace:!0}]}],expression:"['password', {rules: [{ required: true, message: '请输入密码', whitespace: true}]}]"}],attrs:{size:"large",placeholder:"请输入密码",autocomplete:"autocomplete",type:"password"}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["login_role",{rules:[{required:!0,message:"请选择登录角色"}]}],expression:"['login_role', {rules: [{ required: true, message: '请选择登录角色' }]}]"}]},[a("a-radio-button",{staticStyle:{"margin-left":"50px"},attrs:{value:"teacher"}},[e._v("教师登录")]),a("a-radio-button",{staticStyle:{"margin-left":"50px"},attrs:{value:"student"}},[e._v("学生登录")])],1)],1)],1)],1),a("a-form-item",[a("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:e.logging,size:"large",htmlType:"submit",type:"primary"}},[e._v("登录")])],1)],1)],1)])},r=[],o=a("5530"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-layout"},[a("div",{staticClass:"content"},[e._t("default")],2),a("page-footer",{attrs:{"link-list":e.footerLinks,copyright:e.copyright}})],1)},n=[],c=a("613e"),l=a("5880"),u={name:"CommonLayout",components:{PageFooter:c["a"]},computed:Object(o["a"])({},Object(l["mapState"])("setting",["footerLinks","copyright"]))},m=u,d=(a("6e57"),a("2877")),p=Object(d["a"])(m,i,n,!1,null,"63c094a6",null),g=p.exports,f=a("93d6"),h=a("b775"),b=a("89a5"),v={name:"Login",components:{CommonLayout:g},data:function(){return{logging:!1,error:"",form:this.$form.createForm(this)}},computed:{systemName:function(){return this.$store.state.setting.systemName}},methods:Object(o["a"])(Object(o["a"])({},Object(l["mapMutations"])("account",["setUser","setPermissions","setRoles"])),{},{onSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e){if(!e){t.logging=!0;var a=t.form.getFieldValue("user_account"),s=t.form.getFieldValue("password"),r=t.form.getFieldValue("login_role");Object(f["b"])(a,s,r).then(t.afterLogin)}}))},afterLogin:function(e){var t=this;this.logging=!1;var a=e.data;if(0===a.code){var s=a.data,r=s.user,o=s.permissions,i=s.roles;this.setUser(r),this.setPermissions(o),this.setRoles(i),Object(h["g"])({token:a.data.token,expireAt:new Date(a.data.expireAt)}),Object(f["a"])().then((function(e){var s=e.data.data;Object(b["d"])(s),"student"===a.data.roles[0].id&&t.$router.push("/course/student/my/list"),"teacher"===a.data.roles[0].id&&t.$router.push("/course/course/list"),t.$message.success(a.message,3)}))}else this.$message.error(a.message)},onClose:function(){this.error=!1}})},y=v,w=(a("80dc"),Object(d["a"])(y,s,r,!1,null,"5cb3fe54",null)),x=w.exports;t["default"]=x},"80dc":function(e,t,a){"use strict";var s=a("91bb"),r=a.n(s);r.a},"91bb":function(e,t,a){},e413:function(e,t,a){}}]);